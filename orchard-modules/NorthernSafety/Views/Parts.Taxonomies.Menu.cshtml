@using Orchard.Utility.Extensions;
@using Contrib.Taxonomies.Models;
@using Contrib.Taxonomies.Helpers;

@{
    int level=-1;
}
@*<div id="verticalNavHP">*@
<div id="mainMenuLevel2">
    <h1 class="blackText">Northern Safety News & Information</h1>
    <div id="navcontainer">
	    
	    @foreach (Contrib.Taxonomies.Models.TermPart term in Model.Terms) {
		    if(term.GetLevels() > level) {
			    level++;
			    @:<ul>
		    }
		    else if(term.GetLevels() < level) {
			    level--;
			    @:</ul>
		    }
		    else {
			    @:</li>
		    }

		    @:<li class="taxoLink"><span>
			    @Html.ItemDisplayLink((string)term.Name, term.ContentItem)
	    }
        
		    </span></li>
	    @for (int i = 0; i < level; i++) {
	    @:</ul>
	    }
        
	 </div>
	 <div id="leftNavTopBottomLevel2"></div>
</div>
@*</div>*@

<script type="text/javascript">
    $(function () {
        var url = $('#currentUrl').val();
        $('.taxoLink').each(function () {
            var href = $(this).children('span').children('a').attr('href').toLowerCase();
            if (href == url) {
                $(this).attr('id', 'active');
            }
        });
    });
</script>